<% if current_user.nil? %>
alert("Das Session-Cookie ist nicht mehr vorhanden, oder kann nicht gelesen werden.");
window.Location.href='/500';
window.location.reload();
<% end %>
<% points = 0 %>
<% html = (@solution[:words].map do |w| %>
  <% out = '' %>
  <% case w[0].length %>
    <% when 3..4 %>
      <% if points != 1 %>
        <% points = 1 %>
        <% out = "<span class=\"pointbadge\">1&nbsp;&#9654;</span> " %>
      <% end %>
    <% when 5 %>
      <% if points != 2 %>
        <% points = 2 %>
        <% out = "<span class=\"pointbadge\">2&nbsp;&#9654;</span> " %>
      <% end %>
    <% when 6 %>
      <% if points != 3 %>
        <% points = 3 %>
        <% out = "<span class=\"pointbadge\">3&nbsp;&#9654;</span> " %>
      <% end %>
    <% when 7 %>
      <% if points != 5 %>
        <% points = 5 %>
        <% out = "<span class=\"pointbadge\">5&nbsp;&#9654;</span> " %>
      <% end %>
    <% else %>
      <% if points != 11 %>
        <% points = 11 %>
        <% out = "<span class=\"pointbadge\">11&nbsp;&#9654;</span> " %>
      <% end %>
    <% end %>
  <% out + "<span class=\"#{w[3]}\">#{w[0]}</span>" %>
<% end).join(' ') %>
$('div#solution').html('<%= render inline: html %>');
$('strong#cwords').html('<%= @solution[:total][:words] %>');
$('strong#cpoints').html('<%= @solution[:total][:points] %>');
